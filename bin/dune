(library
 (name cli)
 (modules cli)
 (libraries cmdliner fmt.cli logs.fmt fmt.tty logs.cli mdx yojson atdgen))

(executable
 (name main)
 (public_name ocaml-mdx)
 (package mdx)
 (modules :standard \ cli)
 (libraries cli mdx))

(rule
 (targets notebook_j.ml notebook_j.mli)
 (deps notebook.atd)
 (action
  (run atdgen -j -j-std %{deps})))

(rule
 (targets notebook_t.ml notebook_t.mli)
 (deps notebook.atd)
 (action
  (run atdgen -t %{deps})))
